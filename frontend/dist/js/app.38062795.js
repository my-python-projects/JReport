(()=>{"use strict";var e={871:(e,o,r)=>{var a=r(751),t=r(641);const s={id:"app"};function i(e,o,r,a,i,l){const n=(0,t.g2)("router-view");return(0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(n)])}const l={name:"App"};var n=r(262);const d=(0,n.A)(l,[["render",i]]),c=d;var u=r(220);function m(e,o,r,a,s,i){const l=(0,t.g2)("LoginForm");return(0,t.uX)(),(0,t.Wv)(l)}var p=r(33);const f=e=>((0,t.Qi)("data-v-7ba5cf36"),e=e(),(0,t.jt)(),e),v={class:"form-body"},h={key:0,class:"container"},b=f((()=>(0,t.Lk)("img",{src:"/img/avatar.png",alt:"Avatar",class:"avatar"},null,-1))),k=f((()=>(0,t.Lk)("h2",null,"Login",-1))),g={class:"mb-3"},L={key:0,class:"text-danger"},y={class:"mb-3"},w={class:"input-group"},E=f((()=>(0,t.Lk)("i",{class:"far fa-eye"},null,-1))),q=[E],F={key:0,class:"text-danger"},A=(0,t.Fv)('<div class="mb-3 remember-forgot" data-v-7ba5cf36><div class="form-check" data-v-7ba5cf36><input class="form-check-input" type="checkbox" value="" id="rememberMe" data-v-7ba5cf36><label class="form-check-label" for="rememberMe" data-v-7ba5cf36>Lembrar</label></div><a href="#" class="forgot-password" data-v-7ba5cf36>Esqueceu a senha?</a></div>',1),D=f((()=>(0,t.Lk)("hr",{style:{margin:"20px 0","border-color":"#9b59b6"}},null,-1))),C=f((()=>(0,t.Lk)("p",{class:"mb-3",style:{color:"#9b59b6"}},"Ainda não tem uma conta?",-1))),_={key:0},V={key:1,class:"container"},x=f((()=>(0,t.Lk)("img",{src:"/img/avatar.png",alt:"Avatar",class:"avatar"},null,-1))),U=f((()=>(0,t.Lk)("h2",null,"Autenticação 2FA",-1))),S={class:"mb-3"},X=f((()=>(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},"Verificar",-1))),Q={key:0};function R(e,o,r,s,i,l){return(0,t.uX)(),(0,t.CE)("div",v,[i.step2fa?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("div",h,[b,k,(0,t.Lk)("form",null,[(0,t.Lk)("div",g,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.email=e),type:"email",class:"form-control rounded-input",id:"email",placeholder:"Informe o seu email",onBlur:o[1]||(o[1]=(...e)=>l.validateEmailField&&l.validateEmailField(...e)),required:""},null,544),[[a.Jo,i.email]]),i.emailError?((0,t.uX)(),(0,t.CE)("span",L,(0,p.v_)(i.emailError),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",y,[(0,t.Lk)("div",w,[(0,t.bo)((0,t.Lk)("input",{ref:"password","onUpdate:modelValue":o[2]||(o[2]=e=>i.password=e),type:"password",class:"form-control rounded-input",id:"password",placeholder:"Digite sua senha",onBlur:o[3]||(o[3]=(...e)=>l.validatePasswordField&&l.validatePasswordField(...e)),required:""},null,544),[[a.Jo,i.password]]),(0,t.Lk)("span",{class:"input-group-text password-toggle",onClick:o[4]||(o[4]=(...e)=>l.togglePassword&&l.togglePassword(...e))},q),i.passwordError?((0,t.uX)(),(0,t.CE)("span",F,(0,p.v_)(i.passwordError),1)):(0,t.Q3)("",!0)])]),A,(0,t.Lk)("button",{type:"button",class:"btn btn-primary",onClick:o[5]||(o[5]=(...e)=>l.check2fa&&l.check2fa(...e))},"Login"),D,C,(0,t.Lk)("button",{type:"button",class:"btn create-account-btn",onClick:o[6]||(o[6]=(...e)=>l.redirectToSignup&&l.redirectToSignup(...e))},"Criar Conta")]),i.error?((0,t.uX)(),(0,t.CE)("p",_,(0,p.v_)(i.error),1)):(0,t.Q3)("",!0)])),i.step2fa?((0,t.uX)(),(0,t.CE)("div",V,[x,U,(0,t.Lk)("form",{onSubmit:o[8]||(o[8]=(0,a.D$)(((...e)=>l.verify2fa&&l.verify2fa(...e)),["prevent"]))},[(0,t.Lk)("div",S,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>i.token_2fa=e),type:"text",class:"form-control rounded-input",placeholder:"Digite seu token 2FA",required:""},null,512),[[a.Jo,i.token_2fa]])]),X],32),i.error?((0,t.uX)(),(0,t.CE)("p",Q,(0,p.v_)(i.error),1)):(0,t.Q3)("",!0)])):(0,t.Q3)("",!0)])}var J=r(335);const O="http://localhost:5000/api";async function P(e){try{const o=await J.A.post(`${O}/register`,e);return o.data}catch(o){throw console.error("Error registering user:",o),o}}async function j(e){try{const o=await J.A.post(`${O}/login`,e);return o.data}catch(o){throw console.error("Error logging in user:",o),o}}async function T(e){try{const o=await J.A.post(`${O}/report`,e);return o.data}catch(o){throw console.error("Error submitting report:",o),o}}const z=async e=>{try{const o=await J.A.post(`${O}/verify-2fa`,e);return o.data}catch(o){throw console.error("Error verifying 2FA:",o),o}},I=async e=>{try{const o=await J.A.post(`${O}/check-2fa`,e);return o.data}catch(o){throw console.error("Error checking 2FA:",o),o}};function M(e){const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return o.test(String(e).toLowerCase())}function W(e){const o=/^(?=.*[A-Z])(?=.*[!@#$&*])(?=.*[0-9]).{6,}$/;return o.test(String(e))}const B={data(){return{email:"",password:"",token_2fa:"",error:"",step2fa:!1,emailError:"",passwordError:""}},methods:{async check2fa(){try{const e=await I({email:this.email});e.success?e.enabled_2fa?this.step2fa=!0:this.login():this.error=e.message}catch(e){console.error("2FA check failed:",e),this.error="2FA check failed due to network or server error"}},async login(){try{if(this.emailError||this.passwordError)this.error="Please fix the errors in the form.";else{const e=await j({email:this.email,password:this.password});console.log("Login response:",e),e.success?this.$router.push("/report"):this.error=e.message}}catch(e){console.error("Login failed:",e),this.error="Login failed due to network or server error"}},async verify2fa(){try{const e=await j({email:this.email,password:this.password,token_2fa:this.token_2fa});e.success?this.$router.push("/report"):this.error=e.message}catch(e){console.error("2FA verification failed:",e),this.error="2FA verification failed due to network or server error"}},redirectToSignup(){this.$router.push("/register")},togglePassword(){const e=this.$refs.password;e.type="password"===e.type?"text":"password"},validateEmailField(){M(this.email)?this.emailError="":this.emailError="Email inválido."},validatePasswordField(){W(this.password)?this.passwordError="":this.passwordError="A senha deve ter pelo menos 6 caracteres, uma letra maiúscula, um número e um símbolo especial."}}},N=(0,n.A)(B,[["render",R],["__scopeId","data-v-7ba5cf36"]]),H=N,Z={components:{LoginForm:H}},G=(0,n.A)(Z,[["render",m]]),K=G;function Y(e,o,r,a,s,i){const l=(0,t.g2)("RegisterForm");return(0,t.uX)(),(0,t.Wv)(l)}const ee=e=>((0,t.Qi)("data-v-3b6eca78"),e=e(),(0,t.jt)(),e),oe={class:"form-body"},re={class:"container"},ae=ee((()=>(0,t.Lk)("img",{src:"/img/avatar.png",alt:"Avatar",class:"avatar"},null,-1))),te=ee((()=>(0,t.Lk)("h2",null,"Cadastro",-1))),se={class:"mb-3"},ie={class:"mb-3"},le={key:0,class:"text-danger"},ne={class:"mb-3"},de={key:0,class:"text-danger"},ce=ee((()=>(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},"Cadastrar",-1))),ue=ee((()=>(0,t.Lk)("hr",{style:{margin:"20px 0","border-color":"#9b59b6"}},null,-1))),me=ee((()=>(0,t.Lk)("p",{class:"mb-3",style:{color:"#9b59b6"}},"Já possui uma conta?",-1))),pe={key:1,class:"qr-code-container"},fe=ee((()=>(0,t.Lk)("h3",{class:"qr-code-instructions"},"Escaneie o QR Code com seu aplicativo de autenticação:",-1))),ve=["src"],he=ee((()=>(0,t.Lk)("p",{class:"qr-code-instructions"},"Depois de escanear, use o aplicativo para obter seu token 2FA e clique no botão abaixo para confirmar.",-1))),be={class:"mb-3"},ke=ee((()=>(0,t.Lk)("button",{type:"submit",class:"btn btn-primary"},"Verificar",-1))),ge={key:2},Le=ee((()=>(0,t.Lk)("h3",null,"Cadastro Completo!",-1))),ye={key:3};function we(e,o,r,s,i,l){return(0,t.uX)(),(0,t.CE)("div",oe,[(0,t.Lk)("div",re,[ae,te,i.qr_code||i.confirmation?(0,t.Q3)("",!0):((0,t.uX)(),(0,t.CE)("form",{key:0,onSubmit:o[6]||(o[6]=(0,a.D$)(((...e)=>l.register&&l.register(...e)),["prevent"]))},[(0,t.Lk)("div",se,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>i.username=e),type:"text",class:"form-control rounded-input",placeholder:"Usuário",required:""},null,512),[[a.Jo,i.username]])]),(0,t.Lk)("div",ie,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[1]||(o[1]=e=>i.email=e),type:"text",class:"form-control rounded-input",placeholder:"Email",onBlur:o[2]||(o[2]=(...e)=>l.validateEmailField&&l.validateEmailField(...e)),required:""},null,544),[[a.Jo,i.email]]),i.emailError?((0,t.uX)(),(0,t.CE)("span",le,(0,p.v_)(i.emailError),1)):(0,t.Q3)("",!0)]),(0,t.Lk)("div",ne,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[3]||(o[3]=e=>i.password=e),type:"password",class:"form-control rounded-input",placeholder:"Digite sua senha",onBlur:o[4]||(o[4]=(...e)=>l.validatePasswordField&&l.validatePasswordField(...e)),required:""},null,544),[[a.Jo,i.password]]),i.passwordError?((0,t.uX)(),(0,t.CE)("span",de,(0,p.v_)(i.passwordError),1)):(0,t.Q3)("",!0)]),ce,ue,me,(0,t.Lk)("button",{type:"button",class:"btn create-account-btn",onClick:o[5]||(o[5]=(...e)=>l.redirectToLogin&&l.redirectToLogin(...e))},"Fazer Login")],32)),i.qr_code&&!i.confirmation?((0,t.uX)(),(0,t.CE)("div",pe,[fe,(0,t.Lk)("img",{src:i.qr_code,alt:"QR Code"},null,8,ve),he,(0,t.Lk)("form",{onSubmit:o[8]||(o[8]=(0,a.D$)(((...e)=>l.verify2fa&&l.verify2fa(...e)),["prevent"]))},[(0,t.Lk)("div",be,[(0,t.bo)((0,t.Lk)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>i.token_2fa=e),type:"text",class:"form-control rounded-input",placeholder:"Digite seu token 2FA",required:""},null,512),[[a.Jo,i.token_2fa]])]),ke],32)])):(0,t.Q3)("",!0),i.confirmation?((0,t.uX)(),(0,t.CE)("div",ge,[Le,(0,t.Lk)("p",null,"Redirecionando para a tela de login em "+(0,p.v_)(i.countdown)+" segundos...",1)])):(0,t.Q3)("",!0),i.error?((0,t.uX)(),(0,t.CE)("p",ye,(0,p.v_)(i.error),1)):(0,t.Q3)("",!0)])])}const Ee={data(){return{username:"",email:"",password:"",error:"",qr_code:"",emailError:"",passwordError:"",token_2fa:"",confirmation:!1,countdown:5}},methods:{async register(){try{if(this.emailError||this.passwordError)this.error="[ERRO] Verifique o email ou a senha informada!";else{const e=await P({username:this.username,email:this.email,password:this.password});e.success?this.qr_code=e.qr_code:this.error=e.message}}catch(e){console.log("Registration failed"),this.error="Registration failed"}},async verify2fa(){try{const e=await z({email:this.email,token_2fa:this.token_2fa});e&&e.success?(this.confirmation=!0,this.startCountdown()):e&&e.message?this.error=e.message:this.error="2FA verification failed: Unexpected response"}catch(e){console.log("2FA verification failed:",e),this.error=`2FA verification failed: ${e.response?e.response.data.message:e.message}`}},startCountdown(){const e=setInterval((()=>{this.countdown>0?this.countdown--:(clearInterval(e),this.redirectToLogin())}),1e3)},redirectToLogin(){this.$router.push("/login")},validateEmailField(){this.emailError=M(this.email)?"":"Email inválido."},validatePasswordField(){W(this.password)?this.passwordError="":this.passwordError="A senha deve ter pelo menos 6 caracteres, uma letra maiúscula, um número e um símbolo especial."}}},qe=(0,n.A)(Ee,[["render",we],["__scopeId","data-v-3b6eca78"]]),Fe=qe,Ae={components:{RegisterForm:Fe}},De=(0,n.A)(Ae,[["render",Y]]),Ce=De;function _e(e,o,r,a,s,i){const l=(0,t.g2)("ReportForm");return(0,t.uX)(),(0,t.Wv)(l)}const Ve=e=>((0,t.Qi)("data-v-c5e30da4"),e=e(),(0,t.jt)(),e),xe={class:"report-form-container"},Ue={class:"form-group"},Se=Ve((()=>(0,t.Lk)("label",{for:"nome"},"Nome:",-1))),Xe={class:"form-group"},$e=Ve((()=>(0,t.Lk)("label",{for:"data"},"Data:",-1))),Qe={class:"form-group"},Re=Ve((()=>(0,t.Lk)("label",{for:"equipamento"},"Equipamento:",-1))),Je={class:"form-row"},Oe={class:"col-md-6 mb-3"},Pe=Ve((()=>(0,t.Lk)("label",{for:"inicio"},"Início:",-1))),je={class:"col-md-6 mb-3"},Te=Ve((()=>(0,t.Lk)("label",{for:"final"},"Final:",-1))),ze={class:"form-group"},Ie=Ve((()=>(0,t.Lk)("label",{for:"estoqueUtilizado"},"Estoque Utilizado:",-1))),Me={class:"form-group"},We=Ve((()=>(0,t.Lk)("label",null,"Algo foi removido e voltou ao estoque?",-1))),Be={class:"form-check"},Ne=Ve((()=>(0,t.Lk)("label",{class:"form-check-label",for:"sim"},"Sim",-1))),He={class:"form-check"},Ze=Ve((()=>(0,t.Lk)("label",{class:"form-check-label",for:"nao"},"Não",-1))),Ge={key:0,class:"form-group"},Ke=Ve((()=>(0,t.Lk)("label",{for:"motivoRemocao"},"Motivo da remoção:",-1))),Ye=Ve((()=>(0,t.Lk)("button",{type:"submit",class:"btn btn-primary btn-block"},"Enviar",-1))),eo=Ve((()=>(0,t.Lk)("div",{class:"modal fade",id:"modalSucesso",tabindex:"-1",role:"dialog","aria-labelledby":"modalSucessoLabel","aria-hidden":"true"},[(0,t.Lk)("div",{class:"modal-dialog",role:"document"},[(0,t.Lk)("div",{class:"modal-content"},[(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"modalSucessoLabel"},"Sucesso!"),(0,t.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Fechar"},[(0,t.Lk)("span",{"aria-hidden":"true"},"×")])]),(0,t.Lk)("div",{class:"modal-body"}," Nome escrito com sucesso no Word. ")])])],-1))),oo=Ve((()=>(0,t.Lk)("div",{class:"modal fade",id:"modalErro",tabindex:"-1",role:"dialog","aria-labelledby":"modalErroLabel","aria-hidden":"true"},[(0,t.Lk)("div",{class:"modal-dialog",role:"document"},[(0,t.Lk)("div",{class:"modal-content"},[(0,t.Lk)("div",{class:"modal-header"},[(0,t.Lk)("h5",{class:"modal-title",id:"modalErroLabel"},"Erro!"),(0,t.Lk)("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Fechar"},[(0,t.Lk)("span",{"aria-hidden":"true"},"×")])]),(0,t.Lk)("div",{class:"modal-body"}," Houve um erro ao escrever no Word. ")])])],-1)));function ro(e,o,r,s,i,l){return(0,t.uX)(),(0,t.CE)("div",xe,[(0,t.Lk)("form",{onSubmit:o[9]||(o[9]=(0,a.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,t.Lk)("div",Ue,[Se,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"nome","onUpdate:modelValue":o[0]||(o[0]=e=>i.reportData.nome=e),placeholder:"Digite seu nome",required:""},null,512),[[a.Jo,i.reportData.nome]])]),(0,t.Lk)("div",Xe,[$e,(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control",id:"data","onUpdate:modelValue":o[1]||(o[1]=e=>i.reportData.data=e),required:""},null,512),[[a.Jo,i.reportData.data]])]),(0,t.Lk)("div",Qe,[Re,(0,t.bo)((0,t.Lk)("input",{type:"text",class:"form-control",id:"equipamento","onUpdate:modelValue":o[2]||(o[2]=e=>i.reportData.equipamento=e),placeholder:"Digite o equipamento",required:""},null,512),[[a.Jo,i.reportData.equipamento]])]),(0,t.Lk)("div",Je,[(0,t.Lk)("div",Oe,[Pe,(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control",id:"inicio","onUpdate:modelValue":o[3]||(o[3]=e=>i.reportData.inicio=e),required:""},null,512),[[a.Jo,i.reportData.inicio]])]),(0,t.Lk)("div",je,[Te,(0,t.bo)((0,t.Lk)("input",{type:"date",class:"form-control",id:"final","onUpdate:modelValue":o[4]||(o[4]=e=>i.reportData.final=e),required:""},null,512),[[a.Jo,i.reportData.final]])])]),(0,t.Lk)("div",ze,[Ie,(0,t.bo)((0,t.Lk)("textarea",{class:"form-control",id:"estoqueUtilizado","onUpdate:modelValue":o[5]||(o[5]=e=>i.reportData.estoqueUtilizado=e),rows:"4",placeholder:"Digite o estoque utilizado",required:""},null,512),[[a.Jo,i.reportData.estoqueUtilizado]])]),(0,t.Lk)("div",Me,[We,(0,t.Lk)("div",Be,[(0,t.bo)((0,t.Lk)("input",{type:"radio",class:"form-check-input",name:"removidoVoltou",id:"sim",value:"sim","onUpdate:modelValue":o[6]||(o[6]=e=>i.reportData.removidoVoltou=e)},null,512),[[a.XL,i.reportData.removidoVoltou]]),Ne]),(0,t.Lk)("div",He,[(0,t.bo)((0,t.Lk)("input",{type:"radio",class:"form-check-input",name:"removidoVoltou",id:"nao",value:"nao","onUpdate:modelValue":o[7]||(o[7]=e=>i.reportData.removidoVoltou=e)},null,512),[[a.XL,i.reportData.removidoVoltou]]),Ze])]),"sim"===i.reportData.removidoVoltou?((0,t.uX)(),(0,t.CE)("div",Ge,[Ke,(0,t.bo)((0,t.Lk)("textarea",{class:"form-control",id:"motivoRemocao","onUpdate:modelValue":o[8]||(o[8]=e=>i.reportData.motivoRemocao=e),rows:"3",placeholder:"Digite o motivo da remoção"},null,512),[[a.Jo,i.reportData.motivoRemocao]])])):(0,t.Q3)("",!0),Ye],32),eo,oo])}const ao={data(){return{reportData:{nome:"",data:"",equipamento:"",inicio:"",final:"",estoqueUtilizado:"",removidoVoltou:"",motivoRemocao:""}}},methods:{async handleSubmit(){try{const e=await T(this.reportData);e.success?$("#modalSucesso").modal("show"):$("#modalErro").modal("show")}catch(e){$("#modalErro").modal("show")}}}},to=(0,n.A)(ao,[["render",ro],["__scopeId","data-v-c5e30da4"]]),so=to,io={components:{ReportForm:so}},lo=(0,n.A)(io,[["render",_e]]),no=lo,co=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:K},{path:"/register",name:"register",component:Ce},{path:"/report",name:"report",component:no}],uo=(0,u.aE)({history:(0,u.LA)(),routes:co}),mo=uo;mo.beforeEach(((e,o,r)=>{const a=document.body;a.className="","login"===e.name?a.classList.add("login-form-body"):"register"===e.name&&a.classList.add("register-form-body"),r()})),(0,a.Ef)(c).use(mo).mount("#app")}},o={};function r(a){var t=o[a];if(void 0!==t)return t.exports;var s=o[a]={exports:{}};return e[a](s,s.exports,r),s.exports}r.m=e,(()=>{var e=[];r.O=(o,a,t,s)=>{if(!a){var i=1/0;for(c=0;c<e.length;c++){for(var[a,t,s]=e[c],l=!0,n=0;n<a.length;n++)(!1&s||i>=s)&&Object.keys(r.O).every((e=>r.O[e](a[n])))?a.splice(n--,1):(l=!1,s<i&&(i=s));if(l){e.splice(c--,1);var d=t();void 0!==d&&(o=d)}}return o}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[a,t,s]}})(),(()=>{r.d=(e,o)=>{for(var a in o)r.o(o,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:o[a]})}})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.o=(e,o)=>Object.prototype.hasOwnProperty.call(e,o)})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{var e={524:0};r.O.j=o=>0===e[o];var o=(o,a)=>{var t,s,[i,l,n]=a,d=0;if(i.some((o=>0!==e[o]))){for(t in l)r.o(l,t)&&(r.m[t]=l[t]);if(n)var c=n(r)}for(o&&o(a);d<i.length;d++)s=i[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return r.O(c)},a=self["webpackChunkfrontend"]=self["webpackChunkfrontend"]||[];a.forEach(o.bind(null,0)),a.push=o.bind(null,a.push.bind(a))})();var a=r.O(void 0,[504],(()=>r(871)));a=r.O(a)})();
//# sourceMappingURL=app.38062795.js.map